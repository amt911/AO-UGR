\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx, graphics, float, fancyhdr, titling, caption, subcaption}
\usepackage{listings}
\usepackage[a4paper, total={6in, 9.5in}]{geometry}
\usepackage{fancyhdr}
\usepackage{hyperref}   %para que funcione addcontentsline debe ser la ultima que se cargue

%\setcounter{secnumdepth}{-2}       %Poner solo esto si no se quieren numero delante de las secciones y niveles inferiores.

\renewcommand{\footrulewidth}{0.4pt}
\title{
\includegraphics[width=1.75in]{imagenes/UGR-Logo.png} \\
\vspace*{1in}
\textbf{Memoria de la práctica 1} \\
Animación por Ordenador \\
\vspace*{0.5in}}
\author{Andrés Merlo Trujillo \\
andresmerlo@correo.ugr.es \\
77147239H \\ 
\vspace*{0.5in} \\
E.T.S. de Ingenierías Informática y de Telecomunicación \\
\textbf{Universidad de Granada}} \date{\today}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
}

\renewcommand\maketitlehooka{\null\mbox{}\vfill}
\renewcommand\maketitlehookd{\vfill\null}

\begin{document}
\begin{titlingpage}
\maketitle
\end{titlingpage}

\tableofcontents

\newpage

\pagestyle{fancy}   %a partir de comienza el header (se salta el indice y portada)
\fancyhead[L]{Andrés Merlo Trujillo}
\fancyhead[R]{Animación por Ordenador}
%\section{Ejercicio 1}
%\begin{figure}[H]
%    \centering
%    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/passwdfile.png}
%\end{figure}

\section{Ejercicio 1 - Control de peso}

En este ejercicio se pide realizar dos animaciones: una primera de una pelota que rebota sobre un cubo, y una segunda con una pelota que empuja un cubo.

\bigskip


Lo primero que he realizado ha sido crear dos cubos y dos esferas y los he colocado en el sitio inicial; es decir, la primera en el aire y la otra lejos, aún sin tocar el cubo.


%imagen de la escena inicial.
% \section{Ejercicio 1}
En cuanto a la animación, lo voy a dividir en dos subsecciones.

\subsection{Pelota que rebota sobre cubo (P1, C1)}

En este caso, solo es necesario animar la pelota, ya que el cubo se va a mantener inmóvil a lo largo de toda la animación. También he querido hacerlo un poco más realista, por lo que he animado mediante \textit{keyframes} un intento de aceleración de la gravedad y de rozamiento, pero el resultado no es muy convincente. Para ello, he tenido en cuenta que en cada rebote, la altura de la pelota va a ser cada vez menor y que va a tardar algo menos en caer de nuevo. 

\bigskip

A modo de resumen, la pelota tiene los siguientes \textit{keyframes}:

\begin{enumerate}
    \item Se encuentra en el aire.
    \item Sobre el cubo tocándolo (porque ha caído).
    \item En el aire de nuevo, pero más bajo.
    \item Sobre el cubo de nuevo.
    \item Se repiten los dos pasos anteriores varias veces, cada vez con menos altura.
\end{enumerate}

En la siguiente página se muestran todos los \textit{keyframes} para la pelota que rebota sobre el cubo.
%imagenes/Ejercicio 1
%\begin{figure}
%    \centering
%    \begin{subfigure}[b]{0.3\textwidth}
%        \centering
%        \includegraphics[width=\textwidth]{graph1}
%        \caption{$y=x$}
%        \label{fig:y equals x}
%    \end{subfigure}
%    \hfill

\begin{figure}[H]
    \centering
    \begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins1.png}
	    \caption{\textit{Keyframe} en el instante 0.}
	\end{subfigure}   
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins15.png}
	    \caption{\textit{Keyframe} en el instante 15.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins25.png}
	    \caption{\textit{Keyframe} en el instante 25.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins15.png}
	    \caption{\textit{Keyframe} en el instante 35.}
	\end{subfigure}
\end{figure}

\begin{figure}[H]
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins40.png}
	    \caption{\textit{Keyframe} en el instante 40.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins15_short.png}
	    \caption{\textit{Keyframe} en el instante 45.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins48.png}
	    \caption{\textit{Keyframe} en el instante 48.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p1_ins15_short.png}
	    \caption{\textit{Keyframe} en el instante 52.}
	\end{subfigure}
\end{figure}

Cabe destacar que si bien no se pedía modificar la curva, lo he realizado para que tenga aún más realismo la animación (dentro de lo que cabe). 

\newpage

A continuación muestro una captura de la forma de la curva de la animación:


%imatgen de la curva
\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 1/curva_p1.png}
    \caption{Curva de interpolación para la pelota que rebota sobre el cubo.}
\end{figure}


Como se puede observar, cuando la pelota se encuentra en lo alto, comienza parada y poco a poco va acelerando debido a la gravedad, y cuando rebota en el cubo, mantiene la velocidad y poco a poco va frenando de nuevo por la gravedad, hasta llegar al punto más alto, que cae de nuevo siguiendo los pasos anteriores.

\subsection{Pelota que empuja cubo (P2, C2)}

Para esta animación es necesario animar tanto la pelota como el cubo. Aquí he tenido principalmente en cuenta el rozamiento, ya que llega un momento en el que la pelota y el cubo acaban frenando.

\bigskip

Por tanto, los \textit{keyframes} de la \textbf{pelota} son:

\begin{enumerate}
    \item Posición inicial, alejada del cubo.
    \item Se encuentra sobre el cubo, tocándolo.
    \item Se encuentra en la posición final, donde se desea que pare.
\end{enumerate}

\bigskip

% Y a continuación muestro los \textit{keyframes} de la pelota:

%keyframes

% Y la curva interpolación es completamente lineal antes de impactar con el cubo y luego va frenando poco cuando impacta, para frenar del todo.

%funcion


Mientras que para el \textbf{cubo} son:

\begin{enumerate}
    \item Posición inicial, alejado de la pelota. Comienza en el instante en el que la pelota impacta con el cubo.
    \item Posición final donde se desea que se quede el cubo (hay que recordar que debe ser la posición de la pelota, más el radio y la mitad de la longitud del cubo).
\end{enumerate}

Y los \textit{keyframes} de la pelota y el cubo, al darse en el mismo instante, se puede ver en las mismas imágenes. Dichas imágenes se encuentran en la siguiente página.

%fotos

\begin{figure}[H]
    \centering 
	\begin{subfigure}[H]{0.48\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p2_ins1.png}
	    \caption{Pelota: \textit{Keyframe} en el instante 0.}
        \caption{Cubo: El cubo no tiene aún ningún \textit{keyframe}.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.48\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p2_ins10.png}
	    \caption{Pelota: \textit{Keyframe} en el instante 10.}
        \caption{Cubo: \textit{Keyframe} en el instante 10.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.48\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 1/p2_ins40.png}
	    \caption{Pelota: \textit{Keyframe} en el instante 40.}
	    \caption{Cubo: \textit{Keyframe} en el instante 40.}
	\end{subfigure}
    \caption{\textit{Keyframes}, tanto para el cubo como la pelota.}
\end{figure}

Y la curva de interpolación para la pelota comienza lineal hasta tocar el cubo y luego va frenando poco a poco. Mientras que para el cubo solo va frenando poco a poco.

\bigskip

%funcion para el cubo 
\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 1/curva_p2.png}
    \caption{Curva de interpolación para la pelota.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 1/curva_c2.png}
    \caption{Curva de interpolación para el cubo.}
\end{figure}


\section{Ejercicio 2 - Materiales}

En este ejercicio se pide realizar la animación de dos pelotas de distinto material: una primera de goma y otra de bolos. Sabiendo esto, es necesario que la animación sea distinta en ambas.

Por tanto, para la animación de una pelota de goma he tenido en cuenta que tarde más en caer, que su rebote sea más alto y que dé más rebotes que la de bolos.

En cambio, la de bolos cae más rápido, debido a su masa, y solo da un pequeño rebote hasta pararse del todo.


Entonces, los \textit{keyframes} para la pelota de goma son:

\begin{enumerate}
    \item Comienza desde el punto de partida, a cierta distancia del suelo.
    \item A continuación se encuentra en el suelo.
    \item Después se encuentra de nuevo a cierta altura, pero menos que la anterior vez.
    \item Después de nuevo al suelo.
    \item Se repiten los dos pasos anteriores varias veces para dar más realismo de que sea un material que rebota mucho.
\end{enumerate}

Y en la siguiente página se encuentran las fotos con los \textit{keyframes} de la pelota de goma.
%foto de los keyframes


\begin{figure}[H]
    \centering 
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1.png}
	    \caption{\textit{Keyframe} en el instante 0.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_12.png}
	    \caption{\textit{Keyframe} en el instante 12.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_18.png}
	    \caption{\textit{Keyframe} en el instante 18.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_suelo2.png}
	    \caption{\textit{Keyframe} en el instante 22.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_28.png}
	    \caption{\textit{Keyframe} en el instante 28.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_suelo2.png}
	    \caption{\textit{Keyframe} en el instante 34.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_39.png}
	    \caption{\textit{Keyframe} en el instante 39.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_suelo2.png}
	    \caption{\textit{Keyframe} en el instante 44.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_48.png}
	    \caption{\textit{Keyframe} en el instante 48.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_suelo2.png}
	    \caption{\textit{Keyframe} en el instante 52.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_55.png}
	    \caption{\textit{Keyframe} en el instante 55.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p1_suelo2.png}
	    \caption{\textit{Keyframe} en el instante 59.}
	\end{subfigure}
    \caption{\textit{Keyframes} para la pelota de goma.} 
\end{figure}

Y la pelota de bolos tiene los siguientes \textit{keyframes}:

\begin{enumerate}
    \item Comienza desde el punto de partida, a cierta distancia del suelo y a la misma altura que la otra pelota.
    \item A continuación se encuentra en el suelo.
    \item Se encuentra a muy poca altura sobre el suelo.
    \item En el suelo definitivamente.
\end{enumerate}

Y a continuación se encuentran las fotos con los \textit{keyframes} de la pelota de bolos.
%foto de los keyframes
\begin{figure}[H]
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p2.png}
	    \caption{\textit{Keyframe} en el instante 0.}
	\end{subfigure}
    \hfill
    \begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p2_7.png}
	    \caption{\textit{Keyframe} en el instante 7.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p2_11.png}
	    \caption{\textit{Keyframe} en el instante 11.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.15\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 2/p2_15.png}
	    \caption{\textit{Keyframe} en el instante 15.}
	\end{subfigure}

    \caption{\textit{Keyframes} para la pelota de bolos.}
\end{figure}

Si bien lo he dicho anteriormente, cabe destacar que la pelota de bolos cae más rápido que la otra, pero puede que sea casi imperceptible.

\bigskip

En cuanto a las curvas de interpolación, he usado los mismos tipos de curva que en el ejercicio anterior con la pelota que rebota sobre el cubo, teniendo en cuenta la aceleración de la gravedad. 

%mostrar curvas de interpolacion.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 2/curva_p1.png}
    \caption{Curva de interpolación para la pelota de goma.}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 2/curva_p2.png}
    \caption{Curva de interpolación para la pelota de bolos.}
\end{figure}


\section{Ejercicio 3 - Péndulo}

En este ejercicio se pide animar un péndulo, en mi caso compuesto por un prisma cuadrangular (cubo estirado en el eje Z) y una esfera.

%Imagen de esto

Para la realización de la animación, lo primero que he hecho ha sido crear un grupo con ambas figuras para que su gestión sea más fácil. Después, era necesario mover el eje de donde se mueve el grupo (pivote). Tras mirar en la documentación (\href{https://knowledge.autodesk.com/support/3ds-max/learn-explore/caas/CloudHelp/cloudhelp/2021/ENU/3DSMax-Animation/files/GUID-6872F014-4785-43D9-A83B-C774507907B3-htm.html}{Enlace}) hace falta seguir los siguientes pasos para mover el pivote y que se muevan correctamente:

\begin{enumerate}
    \item Seleccionar el grupo y abrir el panel de jerarquía (\textit{Hierarchy Panel}):
    
    %foto de eso
	\begin{figure}[H]
	    \centering
	    \includegraphics[width=0.3\textwidth]{imagenes/Ejercicio 3/pivote_menu.png}
	    \caption{Menú derecho, junto a los botones a los que es necesario darle.}
	\end{figure}


    \item Seleccionar la opción de \textit{Affect Pivot Only} y moverlos con la herramienta de \textit{Select and Move}, usada para mover los distintos objetos de la escena y mover el eje de coordenadas más grueso que ha aparecido hasta el punto donde se debería colgar (justo encima del palo que une a la esfera).
    
    %imagen de movido
	\begin{figure}[H]
	    \centering
	    \includegraphics[width=0.3\textwidth]{imagenes/Ejercicio 3/pivote_pivot.png}
        \caption{Pivote movido al punto donde se cuelga el péndulo.}
	\end{figure}


    \item Salir de este modo para poder animar la figura, que se anima de igual forma que en los ejercicios anteriores.
\end{enumerate}

En cuanto a la animación, la he realizado con dos \textit{keyframes}: uno para la posición más a la izquierda y otro para la posición más a la derecha. Además, he tenido en cuenta que al ser cíclico, los \textit{keyframes} deben estar al principio, en el medio y al final, para que la animación se pueda \textit{loopear}. Estos son:

\begin{enumerate}
    \item Rotado lo máximo a la izquierda posible (inicio).
    \item Rotado lo más a la derecha posible (mitad).
    \item Rotado de nuevo lo más a la izquierda posible (final).
\end{enumerate}

\bigskip

A continuación se encuentran las imágenes con los \textit{keyframes}:
%fotos de los keyframes

\begin{figure}[H]
    \centering
	\begin{subfigure}[H]{0.3\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 3/pen_0.png}
        \caption{\textit{Keyframe} en el instante 0.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.3\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 3/pen_50.png}
        \caption{\textit{Keyframe} en el instante 50.}
	\end{subfigure}
    \hfill
	\begin{subfigure}[H]{0.3\textwidth}
	    \centering
	    \includegraphics[width=\textwidth]{imagenes/Ejercicio 3/pen_0.png}
        \caption{\textit{Keyframe} en el instante 100.}
	\end{subfigure}
    \caption{\textit{Keyframes} de la animación del péndulo.}
\end{figure}

\bigskip

Y en cuanto a la curva de interpolación, me he asegurado que frene cuando llega a los extremos:

\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{imagenes/Ejercicio 3/curva.png}
    \caption{Curva de interpolación para la animación del péndulo.}
\end{figure}

\end{document}
